太好了，從**階段 0｜工具與基本功**開始。我會**逐步動手**帶你建好一個最小可行的 TypeScript 專案，把 Git、GitHub、Node、pnpm、環境變數、.gitignore、README 全部串起來。
每個指令、名詞、概念我都會**定義→為什麼需要→怎麼做→預期結果→常見錯誤與解法**。

> **預設環境**：你用 macOS。若你在 Windows，我也會註明替代做法。
> **最終產物**：一個名為 `hello-ai-app` 的 TypeScript 專案，已上傳 GitHub，可跑測試腳本，乾淨可維護。

---

# 0.0 你要先理解的名詞（超精簡卡）

* **終端機 / Terminal**：打命令的介面（macOS 的「終端機」App、Windows 的 PowerShell）。
* **Shell**：解讀命令的程式（macOS 常見 zsh；Windows 常見 PowerShell）。
* **Git**：版本控制工具，記錄檔案變化、分支、回溯。
* **GitHub**：放 Git 倉庫的雲端服務，也能做協作與 CI/CD。
* **Node.js**：在「電腦系統」而不是瀏覽器執行 JavaScript 的環境（跑工具、伺服器）。
* **npm / pnpm**：JavaScript 套件管理器。`pnpm` 更快更省空間。
* **TypeScript（TS）**：加上型別的 JavaScript，降低 bug 機率。
* **.env（環境變數檔）**：放私密設定（API 金鑰、資料庫密碼）。
* **.gitignore**：告訴 Git 哪些檔不要納入版本控制（例如 `node_modules/`）。
* **README.md**：專案首頁說明，給人類看的操作手冊。

---

# 0.1 安裝與檢查：Homebrew、Git、Node、pnpm

## 0.1.1 安裝 Homebrew（macOS 推薦）

**是什麼**：macOS 上的套件管理器，一行指令裝開發工具。
**為什麼**：以後裝/更新 Git、Node 很省事。

**指令**

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

**預期結果**：跑完會提示你把某兩行 `eval` 指令加到你的 `~/.zprofile` 或 `~/.zshrc`。照做，然後：

```bash
brew --version
```

看到版本號就成功。

**常見錯誤**

* `curl: (6) Could not resolve host`：網路問題，重試或換網路。
* 裝好後 `brew` 找不到：沒把 `eval` 加進 shell 設定檔，照提示補上、重開終端機。

---

## 0.1.2 安裝 Git

**是什麼**：版本控制工具。
**為什麼**：能記錄、比較、回復、分支協作，是專案管理的基礎。

**指令（macOS）**

```bash
brew install git
git --version
```

**Windows**：去 Git for Windows 安裝包安裝，或用 `winget install Git.Git`。

**常見錯誤**

* `zsh: command not found: git`：沒裝或 PATH 沒設好；macOS 就用 `brew install git`。

---

## 0.1.3 安裝 Node（用 fnm 或 nvm；我推薦 fnm）

**是什麼**：Node 版本管理器（fnm = Fast Node Manager）。
**為什麼**：不同專案常需不同 Node 版本，用版本管理器快速切換、升級。

**指令（macOS，用 Homebrew）**

```bash
brew install fnm
fnm --version
```

把初始化加到 shell（zsh）：

```bash
echo 'eval "$(fnm env --use-on-cd)"' >> ~/.zshrc
exec zsh
```

安裝 LTS（長期維護版）：

```bash
fnm install --lts
fnm use --lts
node -v
```

看到 `v20.x`（或更新 LTS）就行。

**Windows**：可用 `scoop install fnm` 或用 `nvm-windows`（不同專案需手動切換）。

**常見錯誤**

* `fnm: command not found`：重開終端機或確認 `eval "$(fnm env --use-on-cd)"` 已加到 `~/.zshrc`。

---

## 0.1.4 啟用 pnpm（建議用 Corepack）

**是什麼**：比 npm 更快的套件管理器。
**為什麼**：硬連結機制讓重複依賴不重複下載，節省空間與時間。
**Corepack**：Node 內建的工具，用來管理 npm/yarn/pnpm 版本。

**指令**

```bash
corepack enable
corepack prepare pnpm@latest --activate
pnpm -v
```

**常見錯誤**

* `corepack: command not found`：Node 太舊。請用 fnm 裝 LTS（Node 16.13+ 才有 corepack）。
* `pnpm: command not found`：`corepack enable` 後重開終端機或再跑一次 `prepare`。

---

# 0.2 設定 Git 身分與 SSH 金鑰（推到 GitHub 必備）

## 0.2.1 設定使用者名稱與 Email（寫進 Git 設定）

**概念**：每次 commit 都會記錄“誰做的”。
**指令**

```bash
git config --global user.name "你的名字"
git config --global user.email "你的Email@example.com"
git config --global init.defaultBranch main
git config --global pull.rebase false
git config --global core.autocrlf input   # macOS/Linux；Windows 建議 true
```

**檢查**

```bash
git config --global --list
```

---

## 0.2.2 產生 SSH 金鑰並加到 GitHub

**是什麼**：用公開金鑰/私密金鑰來安全連線，不用每次輸入密碼。
**指令（macOS/Linux）**

```bash
ssh-keygen -t ed25519 -C "你的Email@example.com"
# 連按三次 Enter，會在 ~/.ssh/ 產生 id_ed25519 與 id_ed25519.pub
cat ~/.ssh/id_ed25519.pub
```

複製 `id_ed25519.pub` 的內容，到 GitHub → Settings → SSH and GPG keys → New SSH key → 貼上。

**測試**

```bash
ssh -T git@github.com
# 預期訊息：Hi <你的帳號>! You've successfully authenticated...
```

**常見錯誤**

* `Permission denied (publickey).`：沒把 `.pub` 內容貼到 GitHub，或用了錯的帳號。
* Windows：用「Git Bash」跑上述指令，或用 GitHub Desktop 走 HTTPS（簡單但每次要 token）。

---

# 0.3 建立專案骨架：`hello-ai-app`

## 0.3.1 建資料夾 & 初始化 Git

**指令**

```bash
mkdir hello-ai-app
cd hello-ai-app
git init
```

**名詞**

* `git init`：把當前資料夾變成 Git 倉庫，產生 `.git` 隱藏資料夾。

**檢查**

```bash
git status
```

會顯示 `On branch master` 或 `main`（剛才 global 設了 main 會是 main）。

---

## 0.3.2 初始化 Node 專案（用 pnpm）

**指令**

```bash
pnpm init
```

**是什麼**：產生 `package.json`（記錄專案名稱、腳本、依賴套件）。

**檔案解剖**

* `package.json.name`：你的套件/專案名稱
* `version`：版本號（語義化版本：主.次.修）
* `scripts`：自訂命令（之後我們會加）

---

## 0.3.3 新增 .gitignore

**是什麼**：告訴 Git 忽略哪些檔。
**為什麼**：避免把 `node_modules`、`.env` 這些本地或私密檔推上去。

**指令**

```bash
cat > .gitignore << 'EOF'
node_modules/
dist/
.env
.DS_Store
*.log
EOF
```

---

## 0.3.4 新增 README.md

**是什麼**：專案使用說明、安裝步驟、指令一覽。
**指令**

````bash
cat > README.md << 'EOF'
# hello-ai-app

最小可行的 TypeScript 專案骨架：

- Node + pnpm
- TypeScript
- ESLint + Prettier
- 環境變數（.env）
- 基本 NPM Scripts

## 快速開始
```bash
pnpm install
pnpm build
pnpm start
````

EOF

````

---

# 0.4 安裝 TypeScript 並建置 tsconfig

## 0.4.1 安裝 TypeScript 與型別（devDependencies）
**名詞**
- **dependencies**：產品運行時需要的套件。  
- **devDependencies**：只在開發/建置需要的套件（例：TypeScript、ESLint）。

**指令**
```bash
pnpm add -D typescript ts-node @types/node
````

* `-D`：裝到 `devDependencies`。
* `ts-node`：直接在 Node 跑 TS 檔（開發時方便）。
* `@types/node`：Node 的型別宣告（讓 TS 知道 `process.env` 等型別）。

---

## 0.4.2 產生 tsconfig.json（TS 設定檔）

**指令**

```bash
npx tsc --init
```

**產物**：`tsconfig.json`，控制目標語法、模組系統、輸出資料夾等。

**建議設定（覆蓋調整）**

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "outDir": "dist",
    "rootDir": "src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "resolveJsonModule": true
  },
  "include": ["src"]
}
```

**名詞解釋**

* `target`：編譯後 JS 的語法等級（越新越好，Node 新版都支援）。
* `module/Resolution: NodeNext`：讓 TS/Node 以現代 ESM 方式解析模組。
* `outDir`：輸出 JS 放哪裡。
* `rootDir`：原始碼根目錄。
* `strict`：嚴格型別檢查，提早發現 bug。
* `esModuleInterop`：讓 CommonJS/ESM 互相更好相容。
* `skipLibCheck`：略過型別庫內部檢查，加速編譯。
* `resolveJsonModule`：允許 import JSON。

---

## 0.4.3 建立程式入口 `src/index.ts`

**指令**

```bash
mkdir src
cat > src/index.ts << 'EOF'
/**
 * 程式入口：展示 TypeScript、環境變數、基本輸出
 */
function greet(name: string): string {
  return `Hello, ${name}!`;
}

const who = process.env.USER || "world";
console.log(greet(who));
EOF
```

**編譯與執行**

```bash
pnpm tsc         # 編譯 TypeScript -> dist/
node dist/index.js
# 預期輸出：Hello, <你的系統帳號>!
```

**快速執行 TS（開發期）**

```bash
pnpm dlx ts-node src/index.ts
# 預期輸出：Hello, <你的系統帳號>!
```

---

# 0.5 NPM Scripts（把指令寫進 package.json）

**修改 `package.json` 的 `scripts` 欄位**：

```json
{
  "scripts": {
    "build": "tsc",
    "start": "node dist/index.js",
    "dev": "ts-node src/index.ts",
    "clean": "rm -rf dist"
  }
}
```

**名詞**

* **scripts**：快捷命令，統一團隊操作方式。
* **build**：編譯 TS。
* **start**：啟動編譯後程式。
* **dev**：直接跑 TS（開發快）。
* **clean**：清理輸出。

**使用**

```bash
pnpm build
pnpm start
pnpm dev
pnpm clean
```

---

# 0.6 ESLint + Prettier：品質與排版

## 0.6.1 安裝

**名詞**

* **ESLint**：找出程式碼疑慮（未用變數、潛在錯誤）。
* **Prettier**：統一排版風格（空白、換行、引號）。
* **Plugin/Config**：ESLint 的規則套件與設定。

**指令**

```bash
pnpm add -D eslint @eslint/js typescript-eslint prettier eslint-config-prettier
```

* `@eslint/js`：官方 JS 規則。
* `typescript-eslint`：讓 ESLint 讀懂 TS。
* `eslint-config-prettier`：關掉與 Prettier 衝突的規則。

## 0.6.2 新增設定檔

**`eslint.config.js`（ESLint 的扁平設定）**

```js
import tseslint from "typescript-eslint";
import js from "@eslint/js";

export default [
  js.configs.recommended,
  ...tseslint.configs.recommended,
  {
    rules: {
      "no-unused-vars": "warn"
    },
    ignores: ["dist/**"]
  }
];
```

**`prettier.config.cjs`**

```js
module.exports = {
  semi: true,
  singleQuote: false,
  trailingComma: "all",
  printWidth: 100
};
```

**在 `package.json` 加腳本**

```json
{
  "scripts": {
    "lint": "eslint .",
    "format": "prettier --write ."
  }
}
```

**使用**

```bash
pnpm lint
pnpm format
```

**常見錯誤**

* ESLint 找不到檔：確定在專案根目錄執行、檔名正確。
* 規則吵架：確定有裝 `eslint-config-prettier` 並生效（我們用扁平格式，已避坑）。

---

# 0.7 環境變數與 .env

## 0.7.1 概念

* **環境變數（Environment Variables）**：給程式的外部設定。不要把私密資訊寫死在程式碼。
* **.env**：本地開發放環境變數的檔案；**要在 `.gitignore` 內**避免上傳。

## 0.7.2 安裝 dotenv 並讀取

```bash
pnpm add dotenv
```

**修改 `src/index.ts`**（最前面加載 .env）

```ts
import "dotenv/config";

function greet(name: string): string {
  return `Hello, ${name}!`;
}

const who = process.env.APP_USER || "world";
console.log(greet(who));
```

**新增 `.env`**

```bash
cat > .env << 'EOF'
APP_USER=Taiwan
EOF
```

**測試**

```bash
pnpm dev
# 預期輸出：Hello, Taiwan!
```

**名詞**

* `dotenv/config`：自動在程式啟動時載入 `.env`。

**常見錯誤**

* `.env` 不生效：確認檔名正確、已 `import "dotenv/config"`、沒有多餘空白或引號。
* 別把 `.env` 推上 GitHub：我們已在 `.gitignore` 忽略它。

---

# 0.8 初次提交與推送到 GitHub

## 0.8.1 先看目前狀態

```bash
git status
```

應該看到未追蹤的檔案（`package.json`, `src/`, `.gitignore`, `README.md`, …）

## 0.8.2 新增、提交

```bash
git add .
git commit -m "chore: init TypeScript project with pnpm, eslint, prettier, dotenv"
```

**名詞**

* `git add`：把檔案加入暫存區準備提交。
* `git commit`：建立一個版本快照。
* 提交訊息建議格式：`type(scope): message`（如 `feat: ...`, `fix: ...`, `chore: ...`）。

## 0.8.3 在 GitHub 建遠端倉庫

1. 到 GitHub 按「New」、Repository name：`hello-ai-app`。
2. 選擇「空倉庫」（不要自動產生 README 等，以免衝突）。
3. 依照 GitHub 給的指令把本地倉庫連到遠端：

```bash
git remote add origin git@github.com:<你的帳號>/hello-ai-app.git
git branch -M main
git push -u origin main
```

**名詞**

* `remote`：遠端倉庫的別名（常用 `origin`）。
* `-u`：建立追蹤關係，以後 `git push` 不用再寫 `origin main`。

**常見錯誤**

* `Permission denied (publickey).`：SSH 金鑰沒設好，回到 0.2.2 檢查。
* `Updates were rejected because the remote contains work that you do not have locally.`：遠端已經有內容（例如你創庫時勾了 README）。先 `git pull --rebase origin main` 或刪掉遠端檔案再推。

---

# 0.9 分支策略（最小可行）

**名詞**

* **main**：穩定可發布版本。
* **feature 分支**：新功能或修 bug 時從 `main` 切出，例如 `feat/env-check`。

**指令**

```bash
git checkout -b feat/env-check
# 開發...（修改檔案）
git add .
git commit -m "feat: add env example and validation"
git push -u origin feat/env-check
```

到 GitHub 開 Pull Request（PR），檢視通過後合併回 `main`。

**為什麼要這樣**：把開發中的變更和線上穩定分開，回退也容易。

---

# 0.10 版本與依賴：語義化版本、鎖檔、安裝選項

**語義化版本（SemVer）**：`主.次.修` = `MAJOR.MINOR.PATCH`

* **修（patch）**：修小 bug（安全）
* **次（minor）**：新增功能（通常安全）
* **主（major）**：破壞性變更（需要手動檢查）

**package.json** 的字元：

* `^1.2.3`：允許升到 `<2.0.0`
* `~1.2.3`：允許升到 `<1.3.0`
* 無符號 `1.2.3`：鎖死版本

**鎖檔**：`pnpm-lock.yaml` 精確記錄實際安裝版本，讓每台機器一致。

**常用安裝選項**

* `pnpm add <套件>` → dependencies
* `pnpm add -D <套件>` → devDependencies
* `pnpm update` → 更新
* `pnpm why <套件>` → 看誰相依它

---

# 0.11（可選進階）Husky + lint-staged + Commitlint

**為什麼**：在「提交之前」自動跑 `lint`、`format`，避免臭 code 進倉庫；限制提交訊息格式讓歷史可讀。

**安裝**

```bash
pnpm add -D husky lint-staged @commitlint/{config-conventional,cli}
```

**初始化 Husky**

```bash
pnpm dlx husky init
```

會產生 `.husky` 目錄，並建立 `pre-commit` 檔。

**設定 `package.json`**

```json
{
  "lint-staged": {
    "*.{ts,tsx,js}": ["eslint --fix", "prettier --write"],
    "*.{md,css,json}": ["prettier --write"]
  }
}
```

**加 Commitlint 設定 `commitlint.config.cjs`**

```js
module.exports = { extends: ["@commitlint/config-conventional"] };
```

**新增 `commit-msg` 鉤子**

```bash
echo 'npx --no -- commitlint --edit "$1"' > .husky/commit-msg
chmod +x .husky/commit-msg
```

**效果**：提交時，會自動格式化與檢查；不符合規範的 commit 訊息會被拒絕。

---

# 0.12 小小健康檢查（確保你真的打通）

請在專案根目錄依序執行，並確認輸出：

```bash
pnpm install           # 安裝依賴，應該成功無錯
pnpm lint              # 可能有 warn，但不該有 error
pnpm format            # 自動排版
pnpm build             # 產生 dist/
pnpm start             # 印出 Hello, Taiwan!（或你的 .env 值）
git status             # 乾淨或只有預期變更
git log --oneline -5   # 看最近 5 個提交
```

---

# 0.13 常見疑難雜症快速表

* **`zsh: command not found: node`**
  用 `fnm install --lts && fnm use --lts`，重開 Terminal。

* **`pnpm: command not found`**
  跑 `corepack enable && corepack prepare pnpm@latest --activate`。

* **`Permission denied (publickey)` 推不上 GitHub**
  重做 0.2.2，確認 `ssh -T git@github.com` 成功。

* **ESM/CJS 匯入錯誤**
  確認 `tsconfig.json` 用 `module: "NodeNext"`, 並以 `.ts` 檔案、正確的 `import` 語法。

* **`node_modules` 太肥**
  這是正常的（依賴多）；不要把它上傳，`.gitignore` 已忽略。

---

# ✅ 階段 0 完成標準（Definition of Done）

1. 你的電腦能 `node -v`、`pnpm -v`、`git --version`。
2. `hello-ai-app` 專案可 `pnpm build && pnpm start`。
3. `.env` 生效、不被版本控制。
4. ESLint＋Prettier 可運作。
5. 專案已推到 GitHub，上有 README。

---

接下來，如果你 OK，我們可以進到**階段 1（UI 版面與設計語言）**，或是先把你剛才的實際輸出（指令與結果）貼給我，我幫你檢查有沒有哪一步沒打通。你也可以說你在 Windows 上，我幫你把上面的每一步改成對應的 Windows 指令。
